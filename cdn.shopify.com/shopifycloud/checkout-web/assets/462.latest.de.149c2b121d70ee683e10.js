"use strict";(self.webpackChunkcheckout_web=self.webpackChunkcheckout_web||[]).push([[462],{27922:(e,t,n)=>{n.d(t,{D:()=>f});var r=n(17402),a=n(36675),s=n(18012),i=n(77491),o=n(62344),l=n(98913),c=n(96241),d=n(99399),u=n(9520),m=n(76882),p=n(85630),y=n(63292),h=n(92996);let g=function(e){return e.Decremented="DECREMENTED",e.Incremented="INCREMENTED",e.Removed="REMOVED",e.Returned="RETURNED",e.ReturnLineItemRemoved="RETURN_LINE_ITEM_REMOVED",e}({});function f(){const e=(0,m.W)(),t=(0,p.a)(),{value:n}=(0,y.UM)(),u=(0,h.Te)(),g=(0,h.qk)().filter((e=>e.quantityChange&&e.quantityChange.delta));if(!n||g&&g.length<=0)return null;const f=t(n.amount,{currency:n.currencyCode,form:"short"});return r.Ay.createElement(a.l,{title:e("payment.order_edit_banner_title",{amount_owed:f},"Zahlung von {{amount_owed}} erforderlich"),collapsible:!0},r.Ay.createElement(s.E,null,e("payment.order_edit_banner_subtitle",{order_number:u?`#${u}`:""},"Deine Bestellung {{order_number}} wurde aktualisiert. Überprüfe diese Änderungen und bezahle anschließend, um deine Bestellung zu bestätigen.")),r.Ay.createElement(i.S,{spacing:"base"}),r.Ay.createElement(o.c,null),r.Ay.createElement(l.jF,{title:e("payment.order_edit_banner_updated_order_label","Aktualisierte Bestellung"),titleHidden:!0,border:"inner",spacing:"none"},r.Ay.createElement(l.Og,{hidden:!0},r.Ay.createElement(l.F2,{hidden:!0},e("order_summary.product_image_label","Produktbild")),r.Ay.createElement(l.F2,{hidden:!0},e("order_summary.description_label","Beschreibung")),r.Ay.createElement(l.F2,{hidden:!0},e("order_summary.quantity_label","Anzahl"))),g.map((({quantity:e,quantityChange:t,image:n,title:a,variantTitle:i})=>r.Ay.createElement(c.K,{key:`${a}${i?`-${i}`:""}`,blockPadding:"base"},r.Ay.createElement(c.Z,{inlineAlignment:"start"},r.Ay.createElement(d.s,{accessibilityLabel:n?.altText??a,size:"base",source:n?.url})),r.Ay.createElement(c.Z,{primary:!0},r.Ay.createElement(s.E,{size:"base",emphasis:"bold"},a),i&&r.Ay.createElement(s.E,{appearance:"subdued",size:"small"},i)),r.Ay.createElement(c.Z,{inlineAlignment:"center"},t&&t.delta&&t.type&&r.Ay.createElement(_,{remainingQuantity:e,delta:t.delta,type:t.type})))))))}function _({remainingQuantity:e,delta:t,type:n}){const a=(0,m.W)();if(0===t)return null;const s=0===e,i=e+t;let o;switch(n){case g.Incremented:o=a("payment.order_edit_banner_items_added",{count:t},{one:"Hinzugefügt",other:"%{count} hinzugefügt"});break;case g.Decremented:o=a("payment.order_edit_banner_items_removed.with_quantities",{quantity:i,delta:t},"{{delta}} von {{quantity}} entfernt");break;case g.Removed:o=a("payment.order_edit_banner_items_removed.in_full","Entfernt");break;case g.Returned:o=s?a("payment.order_edit_banner_items_returned.in_full","Zurückgegeben"):a("payment.order_edit_banner_items_returned.with_quantities",{quantity:i,delta:t},"{{delta}} von {{quantity}} zurückgegeben");break;case g.ReturnLineItemRemoved:o=s?a("payment.order_edit_banner_items_return_line_item_removed.in_full","Aus Rückgabe entfernt"):a("payment.order_edit_banner_items_return_line_item_removed.with_quantities",{delta:t},"{{delta}} aus der Rückgabe entfernt");break;default:return null}return r.Ay.createElement(u.V,{emphasis:"bold",size:"small",inlineAlignment:"end"},o.toUpperCase())}},51080:(e,t,n)=>{n.d(t,{Q:()=>l});var r=n(17402),a=n(70681),s=n(18871),i=n(15947);const o=(0,a.m)({load:()=>(0,s.P)((()=>n.e(378).then(n.bind(n,82669)))),id:()=>82669});function l(e){const t="venmo"===e.fundingSource?"Venmo":"PayPal";return r.Ay.createElement(i.r,{id:t},r.Ay.createElement(o,e))}},39679:(e,t,n)=>{n.d(t,{T:()=>o});var r=n(76882),a=n(47168),s=n(17402),i=n(63292);function o(){const e=(0,r.W)(),{value:t}=(0,i.u_)();return s.Ay.createElement(a.D,{level:1,autoFocus:!0},0===t?.amount?e("review.blocks.review_title_free_order","Bestellung überprüfen und abschließen"):e("review.review_title","Überprüfen und bezahlen"))}},40769:(e,t,n)=>{n.d(t,{K:()=>o});var r=n(84506),a=n(17402),s=n(32148);const i={SectionsContainer:"jvovV"};function o({children:e}){const{shell:{backgroundImage:t},main:{sectionsContainer:n,backgroundImage:o},canvas:l}=(0,s.kV)(),c=(0,s.S2)(n?.blockPadding,n?.inlinePadding),d="transparent"===l?.background||Boolean(o)||Boolean(t)?"":i.SectionsContainer;return a.Ay.createElement(r.a,{padding:c??"none"},a.Ay.createElement("div",{className:d},e))}},8668:(e,t,n)=>{n.d(t,{l:()=>Fn});var r=n(54740),a=n(84506),s=n(86883),i=n(36675),o=n(45041),l=n(27534),c=n(18012),d=n(76882),u=n(17402),m=n(63939),p=n(94973);let y=function(e){return e.Native="NATIVE",e.Web="WEB",e}({});var h=n(78109),g=n(36125),f=n(17141),_=n(53637),b=n(75814),v=n(63292),E=n(38482),A=n(36397),k=n(25082),P=n(31374),C=n(52274),w=n(91287),S=n(89557),I=n(27634),D=n(96489),R=n(39178),z=n(28210),x=n(32910),T=n(9210),L=n(25787),M=n(69528),B=n(1375),N=n(38053),J=n(52110),F=n(38909),$=n(18751),W=n(34839);const U=[J.y.Shipping,J.y.Local];var O=n(22330),q=n(21818),V=n(15348),Z=n(97364);const G=(e,t)=>{if(e)return e;const n=(0,V.R8)(t);return n?.additionalParameters?{id:n.paymentMethodIdentifier,paymentMethod:Z.x.Ideal,paymentAttributes:{bank:n.additionalParameters.bank},lastUsedAt:(new Date).toISOString()}:void 0};var K=n(94012),H=n(89983),j=n(76386);function Y(){const{postPurchaseEnabled:e}=(0,_.H)(),{recordImmediately:t}=(0,I.v)(),n=(0,M.uM)(),{loading:r}=(0,b.kG)(),a=(0,L.Jj)(),s=(0,b.O7)(),i=(0,b.PW)(),o=(0,b.mi)(w.z.OneTimePurchase),{loading:l}=(0,v.DN)(),[,c]=(0,p.fp)(T.D.negotiationProgressError),d=(0,p.md)(T.D.selectedCreditCard),u=(0,p.md)(T.D.selectedPaymentMethod),m=(0,p.md)(T.D.installmentsPayment),y=(0,p.md)(T.D.shopCashBack),h=(0,p.md)(T.D.shopAccountUuid),g=(0,p.md)(T.D.secureData),f=(0,p.md)((0,P.C)().billingAddress),J=(0,A.iy)(),{checkout_as_guest_url:V}=(0,k.I)(),Z=function(){const e=function(){const{checkoutSessionIdentifier:e}=(0,W.Fo)(),[t,n]=(0,p.fp)(T.D.addresses),[r,a]=(0,p.fp)(T.D.selectedShippingAddress),s=(0,M.eO)(),i=(0,b.mi)(w.z.OneTimePurchase),o=!!i&&U.includes(i.methodType);return async()=>{let i=r?.id;if(!F.Jm)return i;if(o&&r&&r.id===F.r9&&r.address&&(0,$.yc)(e)?.saveAddress){const e=await s(r.address);if("success"===e.status&&e.address){const r=t.filter((e=>e.id!==F.r9));n([...r,e.address]),a(e.address),i=e.address.id}}return i}}(),t=(0,M.fI)(),{shippingRequired:n}=(0,b.kG)(),r=(0,p.md)(T.D.installmentsPayment),a=(0,p.md)(T.D.selectedCreditCard),s=(0,p.md)(T.D.selectedShippingAddress),i=r?{disclosuresEvidence:r.disclosures[0].evidence,paymentTermToken:r.token,sellerId:r.seller_id}:void 0;return async()=>{if(!a)return{errors:[{field:[""],message:"No credit card selected"}]};const r=await e(),o=r===F.r9;return t(n&&!o?r:void 0,a.id,i,o?s?.address:void 0)}}(),Y=function(){const e=(0,N.R)(),t=(0,p.md)((0,P.C)().paymentLines),{value:n}=(0,v.mu)(),r=(0,p.md)(T.D.selectedPaymentMethod),a=(0,p.md)((0,P.C)().billingAddress),s=(0,p.md)(T.D.selectedLPMBillingAddress),i=G(r,t),o=i?function(e,t=[]){const n=t.find(B.c4);if((0,B.$X)(e)&&n)return{type:"local",paymentMethodIdentifier:n.paymentMethodIdentifier,name:q.m.Ideal,additionalParameters:e.paymentAttributes}}(i,n):void 0;return({agreementToken:t,sessionToken:r}={})=>{const i=e&&o?function({idealPaymentMethod:e,billingAddress:t,selectedLPMBillingAddress:n}){const r=JSON.stringify({...e.additionalParameters,bank:e.additionalParameters?.bank.toLowerCase()});return{paymentMethod:O.g.Ideal,paymentAttributes:r,paymentMethodIdentifier:e.paymentMethodIdentifier,billingAddress:t,addressId:n?.id}}({idealPaymentMethod:o,billingAddress:(0,D.dP)(a),selectedLPMBillingAddress:s}):{sessionToken:r,agreementToken:t,billingAddress:(0,D.dP)(a),paymentMethodIdentifier:(0,$.N9)(n)};return{method:{type:"wallet",name:S.R.ShopPay,walletContent:i}}}}(),Q=function(){const[,e]=(0,p.fp)(T.D.negotiationProgressError),t=(0,H.W$)();return n=>n===E.RE.CheckingShippingRequirement?{behavior:"block",reason:E.RE.CheckingShippingRequirement,perform(){e(j.Cq.CheckingShippingRequirement)}}:n===E.RE.CalculatingTaxes?{behavior:"block",reason:E.RE.CalculatingTaxes,perform(){e(j.Cq.CalculatingTaxes)}}:n===E.RE.MissingCreditCard?{behavior:"block",reason:E.RE.MissingCreditCard,perform(){e(j.Cq.MissingCreditCard)}}:n===E.RE.InstallmentsFailed?{behavior:"block",reason:E.RE.InstallmentsFailed,perform(){e(j.Cq.MissingInstallmentsBillingAddress)}}:n===E.RE.ShopPayPaymentFailed?{behavior:"block",reason:E.RE.ShopPayPaymentFailed,perform(){e(j.Cq.SubscriptionsBillingAgreementFailed)}}:n===E.RE.PaymentMethodNotAllowed?{behavior:"block",reason:E.RE.PaymentMethodNotAllowed,perform(){e(j.Cq.PaymentMethodNotAllowed)}}:(t.notify(new K.BS(`Unhandled invalid result reason ${n} identified during Shop Pay negotiation intercept`),{severity:"error"}),{behavior:"block",reason:n})}(),ee=function(){const[,e]=(0,p.fp)(T.D.showSessionRevalidator),[,t]=(0,p.fp)(T.D.negotiationProgressError);return n=>{"verification_required"!==n?t("error"!==n?j.Cq.ProcessingError:j.Cq.ProcessingErrorCheckoutAsGuest):e(!0)}}(),te=(0,N.R)(),ne=(0,z.x)(),{storefrontRedirect:re}=(0,x.m)(),{value:ae}=(0,v.mu)(),se=s&&f&&!i,ie=({state:e,parts:t})=>{if(h&&g){const n=e.read(t.shopPayArtifact).value||{};e.write(t.shopPayArtifact,{...n,shopUser:{...n?.shopUser||{},uuid:g}})}},oe=({state:e,parts:t,agreementToken:n,sessionToken:r})=>{const a=e.read(t.paymentLines).value;e.write(t.paymentLines,(0,A.mD)(a,Y({agreementToken:n,sessionToken:r})))},le=({state:e,parts:t})=>{y&&e.write(t.shopPayArtifact,{cashBack:{token:y.token}})},ce=({state:e,parts:t,reason:n})=>{if("completion"===n&&o){const n=e.read(t.deliveryLines).value,r=[o.methodType];n.forEach((t=>{e.write(t.fields.deliveryMethodTypes,r)}))}};(0,C.D3)((async({parts:s,state:o,reason:p})=>{if(c(null),"negotiation"===p)return{behavior:"allow"};if(se||J)return{behavior:"allow",perform(){oe({state:o,parts:s}),ie({state:o,parts:s}),le({state:o,parts:s})}};if(r)return Q(E.RE.CheckingShippingRequirement);if(l)return Q(E.RE.CalculatingTaxes);const y=o.read(s.paymentLines).value;let h=d,g=d;if(te&&(g=G(u,y),h=u&&(0,B.GD)(u)?u.paymentAttributes:void 0),!g)return Q(E.RE.MissingCreditCard);if(m&&!h?.billingAddress)return Q(E.RE.InstallmentsFailed);const _=await Z();if(function(e){return Boolean("failed"===e?.status&&e.statusCode&&e.statusCode>=500)}(_))return t({schemaId:R.$D.PayCheckoutError,payload:{errorType:`Shop Pay appears to be down. Http Status code: ${_.statusCode}.`}}),ne?re({url:V}):window.location.replace(V),{behavior:"block",reason:E.RE.ShopPayPaymentFailed};if(!_||"failed"===_.status)return{behavior:"block",reason:E.RE.ShopPayPaymentFailed,perform(){ee(_?.errors?.[0]?.message)}};if((e||i)&&!m){const t=await n(g.id);return t&&"failed"!==t.status?{behavior:"allow",perform(){oe({state:o,parts:s,agreementToken:t.billingAgreementToken,sessionToken:_.sessionId}),e&&(le({state:o,parts:s}),ie({state:o,parts:s})),ce({state:o,parts:s,reason:p})}}:Q(E.RE.ShopPayPaymentFailed)}if(m&&h?.billingAddress.address){const{autopay_enabled:e,disclosures:t,token:n}=m,r={autoPayEnabled:e,billingAddress:(0,D.dP)(f),disclosureDetails:t,installmentsToken:n,sessionToken:_.sessionId,paymentMethodIdentifier:a.config?.paymentMethodIdentifier??""};return{behavior:"allow",perform(){o.write(s.paymentLines,(0,A.mD)(y,{method:{type:"wallet",name:S.R.ShopifyInstallments,walletContent:r}})),le({state:o,parts:s}),ie({state:o,parts:s})}}}return te&&u&&(0,B.$X)(u)&&!X(ae)?Q(E.RE.PaymentMethodNotAllowed):{behavior:"allow",perform(){oe({state:o,parts:s,sessionToken:_.sessionId}),le({state:o,parts:s}),ce({state:o,parts:s,reason:p}),ie({state:o,parts:s})}}}))}const X=(e=[])=>e.some(B.c4);var Q=n(56319),ee=n(85630),te=n(9520),ne=n(5366),re=n(32485),ae=n.n(re);const se={DoubleSpinnerIcon:"mqkZ3",Circle:"ip0MJ",light:"RuHiV",inner:"jATuK",rotate:"PCUrq",outer:"_6WzuU"};function ie({ariaLabel:e,light:t=!1,size:n=32}){const r={width:`${n}px`,height:`${n}px`};return u.Ay.createElement(u.Ay.Fragment,null,e&&u.Ay.createElement("span",{role:"status",className:"visuallyHidden"},e),u.Ay.createElement("div",{className:se.DoubleSpinnerIcon,style:r,"aria-hidden":"true"},u.Ay.createElement("div",{className:ae()(se.Circle,se.outer,t&&se.light)},oe("M0 15c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15a1 1 0 0 0 0 2c7.18 0 13 5.82 13 13s-5.82 13-13 13S2 22.18 2 15a1 1 0 0 0-2 0z")),u.Ay.createElement("div",{className:ae()(se.Circle,se.inner,t&&se.light)},oe("M4 15c0 6.075 4.925 11 11 11s11-4.925 11-11S21.075 4 15 4a1 1 0 0 0 0 2 9 9 0 1 1-9 9 1 1 0 0 0-2 0z"))))}function oe(e){return u.Ay.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30",width:"100%",height:"100%"},u.Ay.createElement("path",{d:e}))}var le=n(33519);const ce={CodeBoxesWrapper:"T9VTg",CodeBox:"jGM_7",Focused:"eDmc5",Success:"JbVHh",Error:"E3j4l"};function de({focusedBox:e,codeInput:t,maxLength:n,success:r,error:a}){return u.Ay.createElement("div",{className:ce.CodeBoxesWrapper},[...Array(n).keys()].map((n=>{const s=e===n,i=n<t.length?t[n]:"";return u.Ay.createElement("span",{key:n,className:ae()(ce.CodeBox,s&&ce.Focused,r&&ce.Success,a&&ce.Error)},i)})))}const ue={CodeInputWrapper:"Wh2Sa",CodeInput:"VbECF"},me=/^\d*$/,pe=6;function ye({onCodeEntered:e,onClear:t,ariaLabel:n,loading:r,success:a,error:s,maxLength:i=pe}){const o=(0,u.li)(null),[l,c]=(0,u.J0)(""),[d,m]=(0,u.J0)(0);function p(e){m(e.currentTarget.selectionEnd||0)}return(0,u.vJ)((()=>{l.length===i&&(o.current?.blur(),e(l))}),[l,e,i]),(0,u.vJ)((()=>{o.current?.focus()}),[s]),(0,u.vJ)((()=>{l.length<i&&(a||s)&&t()}),[i,l,a,s,t]),u.Ay.createElement("div",{className:ae()(ue.CodeInputWrapper,(0,le.Fo)({colorLayer:"control"}))},u.Ay.createElement("input",{ref:o,className:ue.CodeInput,"aria-label":n,disabled:r,type:"tel",autoComplete:"one-time-code",maxLength:i,value:l,onInput:function(e){const{value:t,selectionEnd:n}=e.currentTarget;r?e.currentTarget.value=l:me.test(t)?(c(t),m(n||0)):e.currentTarget.value=l},onSelect:p,onClick:p,onKeyUp:p,autoFocus:!0}),u.Ay.createElement(de,{focusedBox:d,codeInput:l,maxLength:i,success:a,error:Boolean(s)}))}const he={Footer:"Q9iza"};var ge=n(9124);const fe=({description:e,onClose:t})=>{const n=(0,d.W)(),{to:r,onPress:i}=(0,ge.Q)(),o=(0,z.x)(),{storefrontRedirect:c}=(0,x.m)(),m=(0,u.hb)((()=>{i(),o?c({url:r}):window.location.assign(r)}),[r,o,i,c]);return u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement(s.S,{padding:["none","none","base","none"]},u.Ay.createElement(te.V,null,e)),u.Ay.createElement(a.a,{padding:["none","none","small200","none"]},u.Ay.createElement(l.$,{kind:"primary",onPress:m},n("shop_pay.checkout.continue_to_guest_checkout","Zum Gast-Checkout")),u.Ay.createElement(l.$,{kind:"plain",onPress:t},n("shop_pay.address_form.cancel","Abbrechen"))))};function _e({onComplete:e,onDismiss:t}){const n=(0,d.W)(),[r,i]=(0,u.J0)(""),[o,c]=(0,u.J0)("loading"),[m,y]=(0,u.J0)(!1),[,h]=(0,p.fp)(T.D.sessionVerified),g=(0,M.iV)(),f=(0,M.oW)(),_=(0,u.hb)((e=>{e.errors?.some((e=>"limit_exceeded"===e?.message))&&y(!0),c("error")}),[]);(0,u.vJ)((()=>{(async()=>{try{const e=await g("session-revalidate");"success"===e.status?(i(e.verificationToken||""),c("idle")):"failed"===e.status&&_(e)}catch(e){c("error")}})()}),[g,_]);const b=(0,u.hb)((async t=>{if(r)try{c("loading");const n=await f(t,"session-revalidate",r);if("success"===n.status)return c("success"),h(!0),e();n.errors?.length&&_(n)}catch(n){c("error")}}),[e,f,r,_,h]),v=(0,u.hb)((()=>{c("idle")}),[]);let E;return E="error"===o?u.Ay.createElement(te.V,{appearance:"critical"},n("shop_pay.checkout.authorize_incorrect_code","Der eingegebene Code ist unzulässig")):"loading"===o?u.Ay.createElement(ie,null):u.Ay.createElement(l.$,{onPress:t,kind:"plain"},u.Ay.createElement(s.S,{padding:"base"},n("shop_pay.address_form.cancel","Abbrechen"))),u.Ay.createElement(ne.M,{open:!0,title:m?n("shop_pay.checkout.authorize_limit_exceeded_title","Zu viele Versuche"):n("shop_pay.checkout.title_authorize","Bestätige deine Identität"),accessibilityLabel:n("shop_pay.checkout.title_authorize","Bestätige deine Identität"),onClose:t,hideModalClose:!0},m?u.Ay.createElement(fe,{description:n("shop_pay.checkout.authorize_limit_exceeded","Du hast zu oft einen falschen Code eingegeben."),onClose:t}):u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement(s.S,{padding:["none","none","base","none"]},u.Ay.createElement(te.V,null,n("shop_pay.checkout.authorize_instructions","Gib den Code ein, der an dein Telefon gesendet wurde, um deinen Einkauf sicher abzuschließen."))),u.Ay.createElement(a.a,{inlineAlignment:"center",spacing:"small400"},u.Ay.createElement(ye,{onCodeEntered:b,onClear:v,ariaLabel:n("shop_pay.checkout.authorize_instructions","Gib den Code ein, der an dein Telefon gesendet wurde, um deinen Einkauf sicher abzuschließen."),success:"success"===o,error:"error"===o}),u.Ay.createElement("div",{className:he.Footer},E))))}var be=n(55383),ve=n(72334),Ee=n(56341),Ae=n(87455),ke=n(28523),Pe=n(98264),Ce=n(43240),we=n(96124),Se=n(37538);function Ie({disabled:e,loading:t,onPress:n,isSubmit:r}){const a=(0,o.M)(),s=(0,Ae.o)(),i=r&&a?.id;return function(e,t){const n=(0,Q.b)().isPartner(),[,r]=(0,p.fp)(ke.wP),[,a]=(0,p.fp)(ke.WF),[,s]=(0,p.fp)(ke.cJ),i=(0,p.md)(Pe.s);(0,u.vJ)((()=>{if(n)return s(!0),()=>{s(!1)}}),[s,n]),(0,u.vJ)((()=>{n&&a((()=>t))}),[n,t,a]);const o=i!==Pe.a.None;(0,u.vJ)((()=>{n&&r((()=>o||e))}),[n,o,e,r])}(t,e),(0,Ce.xT)((e=>{e===Ce.YO.Continue&&(i&&(0,Se.Pu)(i),n?.())})),s?u.Ay.createElement(De,null):null}function De(){const e=(0,ve.If)(),{schema:{postMessageHandler:t}}=(0,Ee.Uz)(),n=(0,we.Y)();return(0,u.vJ)((()=>e.listenResult((e=>{e||t({type:"journeyProgressionError",flowType:n})}))),[e,t,n]),null}var Re=n(56476),ze=n(87039),xe=n(64106),Te=n(8625);const Le={Button:"WFzFx","Button--dark":"GbYHt","Button--contrast":"IYc1D"};function Me(){const e=(0,xe.jK)({foregroundColor:ze.ui}),t=(0,Te.dg)(),n=(0,ze.em)(t);return(0,u.Kr)((()=>ae()(Le.Button,{[Le["Button--contrast"]]:!e&&!n,[Le["Button--dark"]]:n})),[n,e])}var Be=n(66630),Ne=n(64791),Je=n(35699),Fe=n(88945),$e=n(80125),We=n(74051),Ue=n(86766),Oe=n(39979),qe=n(33663),Ve=n(67902),Ze=n(57992);function Ge(){const e=(0,H.W$)(),t=(0,H.SU)(),{shopPayCheckoutSurface:n}=(0,k.I)(),{recordImmediately:r,pageLoadId:a}=(0,I.v)(),s=function(){const{loading:e}=(0,v.FC)(),{loading:t}=(0,b.kG)(),{loading:n}=(0,v.DN)();return e||t||n}(),{isUnauthenticatedSession:i}=(0,Be.M)(),o=function(){const{loading:e,value:t}=(0,v.FC)(),{shippingRequired:n}=(0,b.kG)();return!!n&&!e&&"unavailable"===t?.status}(),l=function(){const{value:e}=(0,v.FC)(),{shippingRequired:t}=(0,b.kG)(),{shippingCountries:n}=(0,We.UR)(),r=(0,Oe.f)(void 0,"shipping"),{shippingAddress:a}=(0,P.C)(),s=(0,p.md)(T.D.selectedShippingAddress),i=(0,p.md)(a),o=(0,$e.Z7)(i.countryCode,n,r)(i,"shipping").size>0,l=(0,Ue.Me)(e,w.z.OneTimePurchase,!0),c=(0,Ue.bW)(l),d=c?.methodType===J.y.PickUp;return!(!t||d)&&!s&&(!i||o)}(),c=function(){const e=(0,b.O7)(),t=(0,p.md)(T.D.creditCards),n=(0,p.md)(T.D.selectedFreeCheckoutBillingAddress),r=(0,p.md)(T.D.selectedCreditCard),{hasViolations:a}=(0,qe.Ck)(Ve.I0);return!!a||!!(e||r||t.length)&&(e&&!1===n?.valid||!e&&!r?.billingAddressValid)}(),d=function(){const e=(0,L.Jj)(),{creditCardDisabled:t}=(0,Ze.w)(),n=(0,b.O7)(),r=(0,p.md)(T.D.creditCards),a=(0,p.md)(T.D.selectedCreditCard),s=Boolean((0,$.N3)(e.config?.availableLoanTypes,a?.supportsInstallmentsSplitPayLoan,a?.supportsInstallmentsInterestLoan)),i=Boolean(e.paymentMethodMustSupportInterestBearingLoans&&r.every((e=>t(e))))||!n&&!a&&!r.length;return Boolean(e.paymentMethodSelected)&&!s&&!i}(),{missingRequiredMobilePhoneNumber:m}=(0,Ne.v)(),y=function(){const e=(0,b.O7)(),t=(0,p.md)(T.D.selectedCreditCard);return Boolean(t?.expired&&!e)}(),h=(0,p.md)(T.D.checkoutErrors),g=(0,p.md)(T.D.createUnverifiedUserErrors),f=(0,p.md)(T.D.shopAccountUuid),_=(0,u.li)(0),E=(0,u.li)(null),A=(0,u.li)(Date.now()),C=Boolean(h.delivery[0]),S=Boolean(h.payments[0]),D=!i&&(o||l||C||S||c||d||y);return(0,Fe.N)({enabled:s,onTimeout:t=>{e.notify(new K.BS(`Pay button has been in loading state longer than ${t}ms`))}}),(0,u.vJ)((()=>{s||(_.current++,r({schemaId:R.$D.PayPaymentPagePayNowState,payload:{shopAccountUuid:f,counter:_.current,deliveryValueIncomplete:o,shippingInformationIncomplete:l,hasDeliveryCheckoutError:C,hasPaymentCheckoutError:S,hasCreateUnverifiedUserError:Boolean(g[0]),paymentInformationIncomplete:c,installmentChecksIncomplete:d,missingMobilePhoneNumber:m,paymentMethodExpired:y}}))}),[s,r,f,o,l,C,S,c,g,d,y,m]),(0,u.vJ)((()=>{if(s||D===E.current)return;E.current=D;const e=D?"pay_now_button_disabled":"pay_now_button_enabled";t.distribution(Je.J.ReviewAndPayProcessTime,{tags:{shopPayCheckoutSurface:n},value:Date.now()-A.current}),r({schemaId:R.$D.PayPaymentPageReady,payload:{success:!0,status:e,clientTimestampMs:Date.now(),pageLoadId:a}})}),[r,a,s,D,t,n]),s||D}var Ke=n(53008),He=n(82573),je=n(58482),Ye=n(19560),Xe=n(49653),Qe=n(86582),et=n(45343),tt=n(87912),nt=n(90319),rt=n(659),at=n(23804);function st(){return(0,d.W)()("checkout_sheet.general_payment_error",{change_card_link:u.Ay.createElement(it,{messageType:"check_payment_details"})},"Bei deiner Zahlung ist ein Problem aufgetreten. %{change_card_link} und versuche es erneut.")}function it({messageType:e="change_payment_method"}){const t=(0,d.W)(),{recordImmediately:n}=(0,I.v)(),r=(0,He.C)(),a=(0,u.hb)((()=>{n({schemaId:R.$D.PayPaymentPageUiInteraction,payload:{action:Ye.p}}),r()}),[r,n]);let s="";switch(e){case"change_payment_method":s=t("checkout_sheet.change_payment_method","Zahlungsmethode ändern");break;case"check_payment_details":s=t("checkout_sheet.check_payment_details","Zahlungsdetails überprüfen")}return u.Ay.createElement(Ke.N,{appearance:"monochrome",onPress:a},s)}var ot=n(52027);function lt(){const e=(0,d.W)(),{to:t,onPress:n}=(0,ge.Q)(ge.R.PaymentErrorState);return 0===(0,p.md)(T.D.createUnverifiedUserErrors).length?null:u.Ay.createElement(i.l,{status:"critical"},u.Ay.createElement(a.a,{inlineAlignment:"start",spacing:"small500"},u.Ay.createElement(te.V,null,e("shop_pay.account_creation_error",{check_out_as_guest_link:u.Ay.createElement(Ke.N,{to:t,onPress:n,appearance:"monochrome"},e("shop_pay.checkout.checkout_guest","Als Gast auschecken"))},"Beim Erstellen deines Shop Pay-Kontos ist ein Problem aufgetreten. %{check_out_as_guest_link}, um deinen Kauf abzuschließen."))))}var ct=n(48545),dt=n(28540);function ut(){const e=(0,d.W)(),[t]=(0,ct.eR)();return t!==dt.p.UnauthenticatedUser?null:u.Ay.createElement(te.V,{size:"small",appearance:"subdued"},e("shop_pay.checkout.sign_up_footer.terms_and_privacy_html",{privacy_href:u.Ay.createElement(Ke.N,{external:!0,to:"https://www.shopify.com/legal/privacy/app-users"},e("shop_pay.checkout.sign_up_footer.privacy_policy","Datenschutzerklärung")),terms_href:u.Ay.createElement(Ke.N,{external:!0,to:"https://shop.app/terms-of-service"},e("shop_pay.checkout.sign_up_footer.terms_of_service","allgemeinen Geschäftsbedingungen"))},"Die Angaben, die du für diese Bestellung nutzt, werden für einen schnelleren Checkout beim nächsten Mal in Shop gespeichert. Indem du fortfährst, stimmst du der %{privacy_href} und den %{terms_href} von Shop Pay zu."))}function mt({message:e}){return e?u.Ay.createElement(i.l,{status:"critical",iconHidden:!0},u.Ay.createElement(c.E,{appearance:"critical",size:"base"},e)):null}var pt=n(23743),yt=n(62344);function ht({formattedAmount:e,nextStepLabel:t}){const n="medium";return e?u.Ay.createElement(pt.C,{columns:["fill","auto","auto"],spacing:"base"},u.Ay.createElement(c.E,{size:n},t),u.Ay.createElement(yt.c,{direction:"block"}),u.Ay.createElement(c.E,{size:n},e)):u.Ay.createElement(c.E,{size:n},t)}var gt=n(86155),ft=n(54732),_t=n(75090),bt=n(44985);function vt(){const e=(0,H.W$)(),{currentDetour:t,currentStep:n}=(0,g.Wm)(),r=(0,bt.r)(),a=(0,W.Fo)(),s=(0,ot.j9)();return(0,u.Kr)((()=>({ensureShopPayURL:()=>{n||r.navigate(s.shopPay(),{replace:!0})},leaveBreadcrumb:(r,{nextStep:a})=>{e.leaveBreadcrumb(r,{currentDetour:JSON.stringify(t),currentStep:JSON.stringify(n),nextStep:JSON.stringify(a)})},logError:(r,{nextStep:s,result:i})=>{e.notify(new K.BS(r),{severity:"error",metadata:{source:{type:a.type},checkout:{token:a.checkoutSessionIdentifier||a.sourceId},event:{currentDetour:JSON.stringify(t),currentStep:JSON.stringify(n),nextStep:JSON.stringify(s),result:JSON.stringify(i)}}})}})),[t,n,e,r,a.checkoutSessionIdentifier,a.sourceId,a.type,s])}var Et=n(88686),At=n(84936),kt=n(1408),Pt=n(39122);var Ct=n(46190),wt=n(59454),St=n(67195);function It({criticalMessage:e}){const t=(0,wt.c)(),n=(0,St.X)();return e?u.Ay.createElement(mt,{message:e}):t?u.Ay.createElement(Ct.n,{notice:t,iconHidden:!0}):n?u.Ay.createElement(Ct.n,{notice:n,iconHidden:!0}):null}function Dt(){const e=function(){const e=(0,d.W)(),t=vt(),n=(0,Et.I)(),r=(0,gt.X)(),{nextStep:a}=(0,_t.PL)(),s=(0,ft.P)("simulated"),i=(0,N.R)(),o=(0,At.Y)();return(0,u.vJ)((()=>{s||"thankYou"===a.id||t.leaveBreadcrumb("Shop Pay button is used when next step is not `thankYou`",{nextStep:a})}),[a.id,a.label]),n&&(a.label=e("shop_pay.checkout.subscribe_now","Jetzt abonnieren")),i&&o===Z.x.Ideal&&(a.label=e("shop_pay.checkout.continue_to_payment","Weiter zur Zahlung")),r?e("shop_pay.checkout.authorize_purchase","Kauf autorisieren"):a.label}(),t=Ge(),{onPress:n}=function(){const e=vt(),{recordImmediately:t,pageLoadId:n}=(0,I.v)(),r=(0,gt.X)(),[,a]=(0,p.fp)(T.D.showSessionRevalidator),{progress:s}=(0,g.T4)(),{nextStep:i}=(0,_t.PL)(),o=(0,ft.P)("simulated"),{progressContinue:l}=(0,be.K)(),c=(0,z.x)(),{updateCloseButton:d}=(0,x.m)();return{onPress:(0,u.hb)((async()=>{if(!o){if(r)return c&&d({show:!1}),void a(!0);t({schemaId:R.$D.PayPaymentPagePayNow,payload:{clientTimestampMs:Date.now(),pageLoadId:n}}),await l()?(s((t=>{"thankYou"!==i.id&&e.logError("Shop Pay button triggered progression when next step is not `thankYou`",{nextStep:i,result:t})}),{onProgressBlocked:()=>{e.logError("Shop Pay button triggered but progression is blocked",{nextStep:i}),e.ensureShopPayURL()}}),kt.F.notify({checkout_in_progress:!0})):"thankYou"!==i.id&&(e.logError("Shop Pay button is pressed when next step is not `thankYou`",{nextStep:i}),e.ensureShopPayURL())}}),[e,o,i,n,s,l,t,r,a,c,d])}}(),[r,s]=(0,p.fp)(T.D.showSessionRevalidator),i=function(){const[,e]=(0,p.fp)(T.D.showSessionRevalidator),t=(0,ve.If)(),{recordImmediately:n}=(0,I.v)(),r=(0,Pt.Hy)(),{progress:a}=(0,g.T4)(),s=(0,z.x)(),{updateCloseButton:i}=(0,x.m)();return async()=>{s&&i({show:!0}),e(!1);const o=await t.runInterceptors();if(!(0,ve.Ak)(o))return(0,ve.Tz)(o).forEach((e=>{n({schemaId:R.$D.PayCheckoutError,payload:{errorType:e}})})),void function(e){Promise.resolve().then((()=>e()))}(r);a()}}(),o=(0,d.W)(),c=(0,ee.a)(),{layout:m}=(0,k.I)(),{value:h}=(0,v.u_)(),f=Me(),{isProgressing:_}=(0,be.K)(),E=(0,z.x)(),{updateCloseButton:P}=(0,x.m)(),C=(0,Q.b)().isStandard(),w=(0,Re.v)(),{error:S}=function(){const e=(0,z.x)(),t=(0,je.wv)(),{shippingRequired:n}=(0,b.kG)(),r=(0,d.W)(),a=(0,He.C)(),{recordImmediately:s}=(0,I.v)(),i=(0,u.hb)((()=>{s({schemaId:R.$D.PayPaymentPageUiInteraction,payload:{action:Ye.p}}),a()}),[a,s]);return e&&n&&("empty"===t.status||"error"===t.status)?{error:r("checkout_sheet.invalid_address_with_change_link",{change_address_link:u.Ay.createElement(Ke.N,{appearance:"monochrome",onPress:i},r("checkout_sheet.change_address","Adresse ändern"))},"Der Versand ist für die ausgewählte Adresse nicht möglich. %{change_address_link}")}:{error:null}}(),{error:D,infoOnly:L}=function(){const e=(0,z.x)(),t=(0,A.Bf)(),n=(0,nt.x)(),r=(0,d.W)(),a=(0,p.md)(T.D.negotiationProgressError),{progressing:s}=(0,g.T4)(),{notSupportedError:i,isSelectedPaymentMethodSupported:o,label:l}=(0,at.a)(),{hasViolations:c}=(0,qe.l6)(Ve.mc),{hasViolations:m}=(0,qe.l6)(Ve.Y4),{hasViolations:y}=(0,qe.l6)(Ve.gN),{hasViolations:h}=(0,qe.l6)(Xe.uF),f=(0,tt.Zf)(),{message:_}=(0,rt.D)(),[b]=(0,Qe.Y)(),v=(0,et.ir)(),E=(0,et.Rc)();if(s)return{error:null};if(!e||!t)return{error:null};if(!1===o&&l)return{error:r("checkout_sheet.brand_not_available",{brand:l,change_card_link:u.Ay.createElement(it,{messageType:"change_payment_method"})},"Dieser Shop akzeptiert {{brand}} nicht. %{change_card_link}")};if(a)switch(a){case j.Cq.MissingCreditCard:case j.Cq.ProcessingError:return{error:u.Ay.createElement(st,null)}}if(i)return{error:i};if(m)return{error:r("checkout_sheet.credit_card_expired_error",{change_payment_method_link:u.Ay.createElement(it,{messageType:"change_payment_method"})},"Die ausgewählte Zahlungsmethode ist abgelaufen. %{change_payment_method_link}")};if(v||y)return{error:u.Ay.createElement(st,null)};if("failed"===n.type&&"completion"===n.negotiationStage){let e;return e=n.fetchFailed?r("checkout_sheet.order_network_error","Deine Bestellung konnte aufgrund eines Netzwerkfehlers nicht eingereicht werden. Überprüfe deine Verbindung und versuche es erneut."):r("order_errors.creation_failure","Es gab ein Problem beim Erstellen deiner Bestellung. Versuche es erneut oder wende dich an uns für weitere Details."),{error:e,infoOnly:!0}}return c||h?{error:u.Ay.createElement(st,null)}:f?{error:r("checkout_sheet.billing_address_must_match_error",{change_payment_method_link:u.Ay.createElement(it,{messageType:"change_payment_method"})},"Rechnungsadresse muss mit der Lieferadresse identisch sein. %{change_payment_method_link}")}:_?{error:_}:E||b?{error:u.Ay.createElement(st,null)}:{error:null}}(),{error:M}=function(){const e=(0,d.W)(),{to:t,onPress:n}=(0,ge.Q)(),{storefrontRedirect:r}=(0,x.m)(),a=(0,p.md)(T.D.negotiationProgressError),{hasViolations:s}=(0,qe.Ck)(Ve.I0),i=(0,z.x)(),{recordImmediately:o}=(0,I.v)(),l=(0,u.hb)((()=>{n(),o({schemaId:R.$D.PayPaymentPageUiInteraction,payload:{action:Ye.p}}),r({url:t})}),[t,n,o,r]),c=a===j.Cq.ProcessingErrorCheckoutAsGuest;return i&&(c||s)?{error:e("checkout_sheet.shop_pay_unavailable_message",{check_out_as_guest_link:u.Ay.createElement(Ke.N,{appearance:"monochrome",onPress:l},e("checkout_sheet.check_out_as_guest","checke als Gast aus"))},"Shop Pay ist derzeit nicht verfügbar. Versuche es später erneut oder %{check_out_as_guest_link}.")}:{error:null}}(),{error:B}=function(){const e=(0,d.W)(),{storefrontRedirect:t}=(0,x.m)(),n=(0,z.x)(),r=(0,qe.np)(),{recordImmediately:a}=(0,I.v)(),s=(0,ot.j9)(),i=(0,u.hb)((()=>{a({schemaId:R.$D.PayPaymentPageUiInteraction,payload:{action:Ye.p}}),t({url:s.storefront()})}),[a,t,s]);return n&&r?{error:e("checkout_sheet.item_sold_out_with_continue_link",{continue_shopping_link:u.Ay.createElement(Ke.N,{appearance:"monochrome",onPress:i},e("checkout_sheet.continue_shopping","Zurückkehren zum Shop"))},"Dieser Artikel ist ausverkauft. %{continue_shopping_link}")}:{error:null}}(),J=w?.payActionType===y.Native,F=(0,u.Kr)((()=>C?null:"app"===m&&h&&e===o("general.pay_now_button_label","Jetzt bezahlen")?c(h.amount,{currency:h.currencyCode,form:"short"}):null),[c,m,e,h,o,C]),$=(0,u.hb)((()=>{E&&P({show:!0}),s(!1)}),[E,s,P]);if(M)return u.Ay.createElement(mt,{message:M});if(B)return u.Ay.createElement(mt,{message:B});if(S)return u.Ay.createElement(mt,{message:S});if(D&&!L)return u.Ay.createElement(mt,{message:D});const W=L?D:void 0;return u.Ay.createElement(a.a,null,E&&u.Ay.createElement(It,{criticalMessage:W}),u.Ay.createElement("div",{className:f},J?u.Ay.createElement(Ie,{onPress:n,loading:_,disabled:t}):u.Ay.createElement(l.$,{inlineSize:"fill",onPress:n,loading:_,disabled:t,inlineAlignment:F?"start":"center",accessibilityLabel:F?`${e}\n${F}`:e},u.Ay.createElement(ht,{formattedAmount:F,nextStepLabel:e}))),u.Ay.createElement(ut,null),u.Ay.createElement(lt,null),r&&u.Ay.createElement(_e,{onComplete:i,onDismiss:$}))}const Rt={StickyFooter:"XlHGh",StickyFooterExperiment:"rMCR5",StickyFooterBuffer:"ueKAq",SDKStickyFooterBuffer:"hlTJG",ButtonContainer:"Cfw6S",SDKButtonContainer:"vAl5q"};function zt({children:e}){const t=(0,u.li)(null),[n,r]=(0,u.J0)(0),{layout:a}=(0,k.I)(),s="web"===a,i=(0,Q.b)().isStandard();return(0,u.Nf)((()=>{if(!t.current)return;function e(){if(!t.current)return;const e=t.current.offsetHeight;r(e)}if(e(),!window.MutationObserver)return;const n=new MutationObserver(e);return n.observe(t.current,{childList:!0,subtree:!0}),()=>n.disconnect()}),[e]),u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement("div",{style:{height:n},className:ae()(Rt.StickyFooterBuffer,{[Rt.SDKStickyFooterBuffer]:i})}),u.Ay.createElement("div",{id:"sticky-pay-button-container",style:{height:s?"auto":n},className:ae()(Rt.StickyFooter,{[Rt.StickyFooterExperiment]:s})},u.Ay.createElement("div",{ref:t,className:ae()(Rt.ButtonContainer,{[Rt.StickyFooterExperiment]:s,[Rt.SDKButtonContainer]:i})},e)))}var xt=n(74826),Tt=n(23381),Lt=n(58725);var Mt=n(78414),Bt=n(68565),Nt=n(26803),Jt=n(67551),Ft=n(56305);let $t=function(e){return e.CheckoutOne="C1",e.Pay="PAY",e}({});const Wt=["initializePay","pingPay","updateCheckout","updateCard","setInitialUserState"];class Ut extends Error{constructor(...e){super(...e),this.name="RPCConnectionTimeoutError"}}const Ot=1e3,qt=100;var Vt=n(71866),Zt=n(89941);var Gt=n(31928),Kt=n(50996),Ht=n(6211),jt=n(46277),Yt=n(21004),Xt=n(77979);const Qt=[Xt.X.PaymentsUnacceptablePaymentAmount,Xt.X.DeliveryDeliveryLineDetailChanged];const en="shop-pay-affirm-iframe";function tn({checkoutDetails:e,open:t,onClose:n}){const r=(0,Mt.Z)(),[a,s]=(0,u.J0)(),[i,o]=(0,u.J0)(),[l,c]=(0,u.J0)(null),m=(0,u.hb)((e=>{r.current&&s(e)}),[r]),y=(0,u.li)(),h=(0,d.W)(),[f,_]=(0,p.fp)(T.D.installmentsPayment),[b,v]=(0,p.fp)(T.D.selectedCreditCard),[E,A]=(0,p.fp)(T.D.creditCards),{onInstallmentsError:k}=function(){const{recordImmediately:e}=(0,I.v)(),[,t]=(0,p.fp)(T.D.installmentsRejected),[,n]=(0,p.fp)(T.D.installmentsRetryable),[r,a]=(0,p.fp)(T.D.installmentsPayment),{progress:s}=(0,g.T4)(),i=(0,jt.IX)(),o=(0,u.li)(r),l=(0,u.hb)((r=>{const a=function(e){if(!e)return"no_result";if("errors"in e&&e.errors.length>0){const t=e.errors.map((e=>e.code)).join(", ");if(t)return t}return"failure"in e&&e.failure?`failed_receipt_${e.failure.type}`:"status"in e&&e.status?"invalid"===e.status?`error_result_invalid__${e.reasons.join("__")}`:`error_result_${e.status}`:void 0}(r);let s;!function(e){return!!e&&"violations"in e&&e.violations.some((({code:e})=>Qt.includes(e)))}(r)?(s=Yt.R.InstallmentsPermanentRejection,n(!1)):(s=Yt.R.InstallmentsRetryError,n(!0)),e({schemaId:R.$D.PayPaymentPageInstallments,payload:{eventType:s,success:!1,errorMessage:a}}),t(!0)}),[t,n,e]);return(0,u.vJ)((()=>{r&&o.current!==r&&(s((e=>{"success"!==e.status&&"alreadyCompleted"!==e.status&&(l(e),a(void 0))})),o.current=r)}),[r,l,s,a]),(0,u.vJ)((()=>{if("failed"!==i?.status)return;r&&(l(i),a(void 0));const t="payment"===i.failure.type?i.failure.code:i.failure.type;e({schemaId:R.$D.PayCheckoutError,payload:{errorType:t}})}),[i]),{onInstallmentsError:l}}(),P=(0,u.Kr)((()=>({onClose(e,t){o(t),l||c(e),n()},setHeight(e){a&&(a.style.height=`${e}px`)},onComplete(e){_(e)},onError:k,onUpdateProgress(e,t){y.current=e;const n=t?E.find((e=>Number(e.id)===t?.id)):null,r=n&&t?.id!==Number(b?.id),a=!n&&t;if(r)v(n);else if(a){const e=(s=t,{lastUsedAt:"",name:"",id:String(s.id),brand:s.brand,expired:s.expired,expiring:!1,expiryMonth:s.month,expiryYear:s.year,funding:s.funding,lastDigits:s.last_digits,supportsInstallmentsInterestLoan:s.supports_installments_interest_loan,supportsInstallmentsSplitPayLoan:s.supports_installments_split_pay_loan,installmentsSplitPayLoanNotSupportedReason:s.installments_split_pay_loan_not_supported_reason,installmentsInterestLoanNotSupportedReason:s.installments_interest_loan_not_supported_reason,storesWithActiveSubscriptions:s.stores_with_active_subscriptions,billingAddress:{address:{firstName:s.billing_address.first_name,lastName:s.billing_address.last_name,company:s.billing_address.company,address1:s.billing_address.address1,address2:s.billing_address.address2,city:s.billing_address.city,postalCode:s.billing_address.zip,phone:s.billing_address.phone,countryCode:s.billing_address.country_code,zoneCode:s.billing_address.zone_code}},billingAddressValid:s.address_valid});A([...E,e]),v(e)}var s}})),[E,a,l,n,k,b?.id,A,_,v]),C=function(e,t){const{checkoutSessionIdentifier:n}=(0,W.Fo)(),r=(0,Gt.Y)(),{myshopifyDomain:a,merchantPolicies:s}=(0,Kt.q)(),[i]=(0,ct.sg)(),{pageLoadId:o}=(0,I.v)(),[l,c]=(0,u.J0)(i?.id),d=(0,L.Jj)(),m=d.config?.availableLoanTypes.join(",")||"",p=s?.find((({handle:e})=>"refund-policy"===e))?.url,y=(0,Tt.sG)(),h=(0,Tt.Qw)();return(0,u.vJ)((()=>{!e&&i&&c(i.id)}),[i,e]),(0,u.Kr)((()=>{if(!n||!l)return null;let e;if(F.Jm){const t=(0,$.yc)(n);t&&(e=JSON.stringify({first_name:(s=t).address.firstName||"",last_name:s.address.lastName||"",company:s.address.company||"",address1:s.address.address1||"",address2:s.address.address2||"",city:s.address.city||"",zip:s.address.postalCode||"",phone:s.address.phone||"",country_code:s.address.countryCode,zone_code:s.address.zoneCode,country:""}))}var s;const i={checkout_token:n,locale:r,parent_page_load_id:o,selected_card_id:l,shopify_domain:a,last_known_step_id:t,available_loan_types:m,refund_policy_url:p,isPointOfSale:y,ephemeral_address:e},c=(y?Object.entries({...i,...h}):Object.entries(i)).map((([e,t=""])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`)).join("&"),{primary:d}=(0,Ht.af)();return`https://${d}/pay/transactions/installments_iframe?${c}`}),[n,r,o,l,a,t,m,p,y,h])}(t,i),w=function(e,t,n){const[r,a]=(0,u.J0)(!1),s=(0,u.Kr)((()=>{if(!t)return;const e=function(e,{logging:t,messenger:n,...r}){return{...(0,Vt.UD)(n??(0,Zt.L)(),r),id:r.uuid(),log(n,...r){t&&console.log(`[${e}-RPC] ${n}`,...r)}}}($t.CheckoutOne,{callable:Wt,logging:Ft.y,messenger:(0,Nt.b)(t,{terminate:!1}),uuid:Jt.u});return e.log("expose initializeC1"),e.expose({initializeC1(){}}),e}),[t]);(0,u.vJ)((()=>{if(!s)return void a(!1);const t={closeModal(t,r){n("closeModal",arguments),e.onClose(t,r)},initializeC1(){return n("initializeC1",arguments),a(!0),{id:s.id,metadata:{timestamp:(new Date).toISOString()}}},installmentsError(){n("installmentsError",arguments),e.onError()},payWithInstallments(t){n("payWithInstallments",arguments),e.onComplete(t)},pingC1(e="interrogative"){return n("pingC1",arguments),s.log(`PING: ${e} @ ${(new Date).toISOString()}`),`PONG: ${$t.CheckoutOne}`},resizeModal(t){return n("resizeModal",arguments),e.setHeight(t),window.innerHeight},updateProgress(t,r){n("updateProgress",arguments),e.onUpdateProgress(t,r)}};function n(e,t){s?.log(e,t)}s.log("expose handlers"),s.expose({...t})}),[e,s]);const i=(0,u.hb)((e=>e.initializePay()),[]),{connected:o,error:l}=function(e,t,{timeout:n=Ot,attemptDelay:r=qt}={}){const[a,s]=(0,u.J0)(!1),[i,o]=(0,u.J0)(),l=e&&t&&!a&&!i;return(0,u.vJ)((()=>{let n=!1;return e&&t&&l&&(e.log("connection initiated"),async function(){if(!e||!t||!l)return;const{call:a,log:i}=e;for(;;)try{i("RPC channel opening...");const e=await t(a);if(!e){if(i("RPC channel not ready yet"),await new Promise((e=>setTimeout(e,r))),n)break;continue}i("RPC channel opened",e),n||s(!0);break}catch(c){i("RPC connection failed",c),n||o(c);break}}()),()=>{n=!0}}),[r,l,t,e]),(0,u.vJ)((()=>{if(!e||!l)return;let t=!1;const{log:r}=e,a=setTimeout((()=>{if(l){const e=new Ut("RPC channel open timeout");r("RPC connection failed",e),t||o(e)}}),n);return()=>{clearTimeout(a),t=!0}}),[l,e,n]),(0,u.vJ)((()=>(e||s(!1),()=>{e&&e.terminate()})),[e]),{connected:a,error:i}}(s,r?i:void 0,n);if(l)throw l;if(s&&r&&o)return s.call}(P,a);return(0,u.vJ)((()=>{!e&&f||(y.current=void 0)}),[e,f]),(0,u.vJ)((()=>{w&&e&&!f&&w.updateCheckout(e,y.current)}),[e,f,w]),(0,u.vJ)((()=>{w&&b?.id&&w.updateCard(b.id)}),[w,b?.id]),(0,u.vJ)((()=>{w&&l&&w.setInitialUserState(l)}),[w,l]),C?u.Ay.createElement(Bt.x,{accessibilityLabel:h("shop_pay.pay_in_installments_title","Mit Shop Pay Installments bezahlen"),blocking:!0,iframeId:en,iframeRef:m,open:t,source:C}):null}var nn=n(81772),rn=n(277);const an={AffirmLogo:"iptI8"};var sn=n(58168);const on=e=>u.n("svg",(0,sn.A)({xmlns:"http://www.w3.org/2000/svg",width:40,height:18},e),u.n("path",{d:"M3.058 14.543c-.482 0-.724-.236-.724-.623 0-.72.812-.965 2.292-1.121 0 .962-.656 1.744-1.569 1.744zm.638-5.413c-1.058 0-2.275.495-2.936 1.017l.604 1.26c.53-.48 1.386-.892 2.159-.892.734 0 1.14.243 1.14.734 0 .33-.269.497-.777.563C1.99 12.056.5 12.575.5 14.026c0 1.15.826 1.846 2.116 1.846.92 0 1.74-.507 2.129-1.176v.99H6.46v-4.148c0-1.712-1.2-2.408-2.764-2.408m17.224.188v6.367h1.837v-3.068c0-1.458.89-1.886 1.51-1.886.243 0 .57.07.785.23l.334-1.684a2.1 2.1 0 0 0-.822-.147c-.944 0-1.538.415-1.929 1.258v-1.07h-1.714zm12.979-.188c-.971 0-1.697.57-2.075 1.118-.35-.709-1.093-1.118-1.983-1.118-.971 0-1.643.535-1.954 1.15v-.962h-1.77v6.367h1.838v-3.277c0-1.177.621-1.742 1.201-1.742.525 0 1.007.337 1.007 1.207v3.812h1.835v-3.277c0-1.19.606-1.742 1.213-1.742.486 0 .998.35.998 1.193v3.826h1.834v-4.401c0-1.431-.971-2.154-2.144-2.154m-17.447.187h-1.664v-.648c0-.842.485-1.083.903-1.083.462 0 .822.203.822.203l.566-1.284s-.573-.372-1.617-.372c-1.173 0-2.508.656-2.508 2.716v.468h-2.785v-.648c0-.842.485-1.083.903-1.083.238 0 .557.054.822.203l.566-1.284c-.338-.196-.88-.372-1.617-.372-1.173 0-2.508.656-2.508 2.716v.468H7.269v1.405h1.066v4.963h1.834v-4.963h2.785v4.963h1.834v-4.963h1.664zm1.095 6.367h1.832V9.317h-1.832z","data-logo-part":"text"}),u.n("path",{d:"M28.24.434c-4.956 0-9.372 3.413-10.625 7.8h1.795C20.457 4.968 24.012 2.1 28.24 2.1c5.14 0 9.582 3.882 9.582 9.925 0 1.356-.177 2.58-.513 3.66h1.743l.017-.059c.286-1.115.431-2.326.431-3.6 0-6.74-4.95-11.59-11.26-11.59z","data-logo-part":"accent"})),ln=18;function cn({iconHeight:e=ln}){const t=(0,d.W)();return u.Ay.createElement(on,{className:an.AffirmLogo,title:t("shop_pay.affirm_title","Affirm"),fill:ze.ui.toRgb(),height:e})}const dn="CA";function un(){const e=(0,d.W)(),[t,n]=(0,u.J0)(!1);return r=(0,p.md)((0,P.C)().billingAddress),r?.countryCode===nn.O.Us&&r?.zoneCode===dn?u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement(s.S,{display:"inline",padding:["none","none","none","small500"]},u.Ay.createElement(l.$,{kind:"plain",onPress:()=>n(!0)},e("shop_pay.eligibility_details.title","Details zur Berechtigung"))),u.Ay.createElement(Bt.x,{title:e("shop_pay.eligibility_details.title","Details zur Berechtigung"),open:t,onClose:()=>n(!1)},u.Ay.createElement(a.a,{spacing:"large200"},u.Ay.createElement(te.V,{appearance:"subdued"},e("shop_pay.eligibility_details.legal_copy","Zahlungsoptionen werden von Affirm angeboten und unterliegen einer Berechtigungsprüfung und sind möglicherweise nicht in allen Bundesstaaten verfügbar. Einwohner Kaliforniens: Affirm Loan Services, LLC ist lizenziert durch das Department of Business Oversight. Darlehen werden gemäß der Lizenz 60DBO-111681 des California Financing Law vergeben oder vermittelt.")),u.Ay.createElement(l.$,{onPress:()=>n(!1),kind:"secondary"},e("shop_pay.checkout.close_notification","Schließen")),u.Ay.createElement(a.a,{inlineAlignment:"center"},u.Ay.createElement(rn.C,{color:"branded",size:"medium"}),u.Ay.createElement(te.V,{size:"small",appearance:"subdued"},e("shop_pay.pay_in_installments_affirm_partnership",{affirmLogo:u.Ay.createElement(cn,null)},"Ein Partner von {{affirmLogo}}")))))):null;var r}var mn=n(21732);const pn=()=>{const{loaded:e,error:t}=function(e){const t=(0,u.li)(document.querySelector(`script[src="${e}"]`)),[n,r]=(0,u.J0)(Boolean(t.current)),[a,s]=(0,u.J0)(!1);return(0,u.vJ)((()=>{if(!e)return;const n=e=>{"load"===e.type&&r(!0)},a=e=>{"error"===e.type&&s(!0)};return t.current||(t.current=document.createElement("script"),t.current.type="application/javascript",t.current.async=!0,t.current.src=e,document.body.appendChild(t.current)),t.current.addEventListener("load",n),t.current.addEventListener("error",a),()=>{t.current?.removeEventListener("load",n),t.current?.removeEventListener("error",a)}}),[e]),{loaded:n,error:a}}((0,Ht.Lx)()),n=(()=>{const[e]=(0,mn.l)(),t=(0,b.$v)()?.amount;if(!e||0===e.length)return null;const n=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);let r,a,s=!1;if(!t)return null;const i=t/4,o={SPLIT_PAY:"split_pay",INTEREST:"interest",ZERO_PERCENT:"zero_percent"},l=e.map((e=>{const{minPrice:i,maxPrice:l,terms:c}=e,d=parseFloat(i.amount),u=parseFloat(l.amount);return r?d<r&&(r=d):r=d,a?u>a&&(a=u):a=u,t>=d&&t<=u&&(s=!0),{min_price:n(d),max_price:n(u),terms:c.map((e=>{const{apr:t,loanType:n,installmentsCount:r}=e;return{apr:t,loan_type:o[n],installments_count:r}}))}}));return r&&a?{type:"checkout",price_per_term:n(i),full_price:n(t),eligible:s,min_price:n(r),max_price:n(a),number_of_payment_terms:4,financing_plans:l,installments_buyer_prequalification_enabled:!1,seller_id:null}:null})();return t?null:e&&n?u.Ay.createElement("span",{className:"pZg1c"},u.Ay.createElement("shop-pay-installments-banner",{"shopify-meta":JSON.stringify(n)})):null};function yn(){const e=(0,d.W)(),[t,n]=(0,u.J0)(!1),r=(0,u.hb)((()=>n(!1)),[]),s=function(){const[e,t]=(0,u.J0)(),[n,r]=(0,u.J0)(!1),{value:a}=(0,v.u_)(),s=function(){const e=(0,Tt.sG)(),{value:t}=(0,v.Ek)(),n=(0,u.Kr)((()=>t?.lines.filter((({quantity:e})=>e>0))),[t?.lines]),{value:r}=(0,b.ld)(w.z.OneTimePurchase),a=(0,Ue.bW)(r),{shippingRequired:s}=(0,b.kG)(),[i]=(0,ct.Df)(),o=(0,$.Bv)(e,a),l=(0,Tt.bs)(),{value:c}=(0,v.DN)(),d=function(e){switch(e?.status){case"available_total":return e.totalTax;case"available_total_included":return e.totalIncludedInTarget;default:return}}(c),{value:m}=(0,v.u_)();return(0,u.Kr)((()=>{if(n)return{merchandiseLines:n,shippingAddress:s?i?.address:void 0,shippingAmount:a?.costAfterDiscounts,taxAmount:d,total:m,channel:e?j.Cu.RetailPos:j.Cu.Online,deliveryMethod:o,storeAddress:l}}),[e,a,i,s,m,d,n,o,l])}(),i=(0,Lt.Z)(e);return(0,u.vJ)((()=>{if(!a||!s)return void t(void 0);const n={format:"${{amount}}",decimal_mark:".",thousands_separator:","};if(!e)return void t({currencyFormat:n,installmentsProposalData:s,paymentDue:a});const i=JSON.stringify(s)!==JSON.stringify(e.installmentsProposalData);i&&t({currencyFormat:n,installmentsProposalData:s,paymentDue:a}),r(i)}),[e,s,a]),{checkoutProposal:e,previousCheckoutProposal:i,hasChanged:n}}(),{isProgressing:i,progressContinue:o}=(0,be.K)(),m=(0,L.Jj)(),{recordImmediately:p}=(0,I.v)(),y=Ge(),h=Me(),g=m.config?.availableLoanTypes,f=(0,xt.s)();return(0,u.vJ)((()=>{s?.hasChanged&&t&&r()}),[s?.hasChanged,t,r]),u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement(a.a,null,u.Ay.createElement("div",{className:h},u.Ay.createElement(l.$,{loading:i,disabled:y,inlineSize:"fill",onPress:async()=>{await o({withShopPayInstallments:!0})&&(n(!0),p({schemaId:R.$D.PayPaymentPageUiInteraction,payload:{action:"continue_with_installments"}}))}},u.Ay.createElement(c.E,{size:"large"},e("general.continue_to_payment_plans_button_label","Weiter zu den Zahlungsplänen")))),u.Ay.createElement(te.V,{size:"small",appearance:"subdued",inlineAlignment:"start"},(()=>{const t=(0,$.eu)(g),n=!f.locale.startsWith("en");return u.Ay.createElement(te.V,{size:"small",appearance:"subdued"},t&&`${e("shop_pay.installments_subject_to_eligibility","Abhängig von der Berechtigung.")} `,e("shop_pay.installments_partnership_affirm",{affirmLogo:u.Ay.createElement(cn,null)},"Ratenzahlung in Zusammenarbeit mit {{affirmLogo}}."),n&&` ${e("shop_pay.installments_translations_disclaimer","Affirm und die entsprechenden Angebote werden nur auf Englisch unterstützt. Übersetzungen werden nicht von Affirm bereitgestellt.")}`,u.Ay.createElement(un,null),u.Ay.createElement(pn,null))})()),u.Ay.createElement(ut,null),u.Ay.createElement(lt,null)),u.Ay.createElement(tn,{checkoutDetails:s?.checkoutProposal,open:t,onClose:r}))}function hn(){Y();const{layout:e}=(0,k.I)(),t=!(0,Q.b)().isPartner()&&"app"===e,n=(0,L.Jj)(),r=n.supported&&n.paymentMethodSelected?yn:Dt;return t?u.Ay.createElement(f.Z,null,u.Ay.createElement(zt,null,u.Ay.createElement(r,null))):u.Ay.createElement(r,null)}var gn=n(60118),fn=n(13614),_n=n(56269),bn=n(41813),vn=n(70212),En=n(51080);const An={PayPalExpressButtonContainer:"bci5X",PayPalExpressButtonContainerRedesign:"Qaml6",PayPalExpressButtonContainerWhenLoading:"ZfW5G",PayPalExpressButtonContainerWhenSpinnerDisplayed:"_53FP_"};function kn({isLoading:e,isSpinnerDisplayed:t,children:n}){const r=(0,xe.Bl)();return u.Ay.createElement("div",{className:ae()(An.PayPalExpressButtonContainer,{[An.PayPalExpressButtonContainerRedesign]:r,[An.PayPalExpressButtonContainerWhenLoading]:e,[An.PayPalExpressButtonContainerWhenSpinnerDisplayed]:t})},n)}function Pn(){const e=(0,bn.H5)(),[t]=(0,bn.VS)(),n=u.Ay.createElement(s.S,{inlineAlignment:"center"},u.Ay.createElement(vn.y,{size:"large"})),r="rendered"!==t.status&&"error"!==t.status;return u.Ay.createElement(u.Ay.Fragment,null,u.Ay.createElement(kn,{isLoading:e,isSpinnerDisplayed:r},u.Ay.createElement(En.Q,{buttonLabel:"pay",isPayWithPayPalFlow:!0,progressToNextStep:!0,buttonColor:"blue",isDisabled:e})),r?n:null)}var Cn=n(20484),wn=n(69516),Sn=n(84807),In=n(31533);const Dn=(0,u.Rf)((function({label:e,loading:t,disabled:n,formId:r},a){const s=(0,In.$J)(),i=function(){const{sdkInstance:e}=(0,Ee.bD)(),t=(0,Q.b)();return(0,u.hb)((n=>{e&&t.isStandard()&&(0,Se.u1)(e,n)}),[e,t])}();return u.Ay.createElement(Rn,{isFullyVaulted:s},u.Ay.createElement(l.$,{onPress:()=>{r&&s&&(0,Se.Pu)(r),i({handlerId:"__internalValidateSubmit",body:{trigger:"pay-button"}})},accessibilityRole:"submit",inlineSize:"fill",loading:t,disabled:n,ref:a},u.Ay.createElement(c.E,{size:"large"},e)))})),Rn=e=>e.isFullyVaulted?u.Ay.createElement(f.Z,null,u.Ay.createElement("div",{onTouchMove:e=>{e.preventDefault()},className:"OXkEs",id:"checkout-sdk-pay-button-container"},u.Ay.createElement(s.S,{padding:["large200","large200","large400","large200"]},e.children))):e.children;var zn=n(45559),xn=n(18194);class Tn extends Error{constructor(...e){super(...e),this.name="RageClickError"}}function Ln({children:e}){const t=(0,H.SU)(),n=(0,H.W$)(),r=(0,Pt.zM)(),a=(0,v.rZ)(),s=(0,u.li)(),i=(0,u.li)(),{blocked:o}=(0,g.T4)();return(0,g.od)((e=>{s.current=void 0,i.current=void 0,"violations"in e&&(s.current=e.violations.map((e=>e.code))),"reasons"in e&&(i.current=e.reasons)})),u.Ay.createElement("div",{onClickCapture:function(e){e.detail>2&&(t.increment(Je.J.RageClick,{value:1,tags:{customerProfile:a?.__typename}}),n.notify(new Tn,{metadata:{context:{numberOfErrors:r?.numberOfErrors(),lastInterceptionReasons:i.current,lastViolations:s.current,blocked:o}}}))}},e)}var Mn=n(19874),Bn=n(23708),Nn=n(42420);const Jn=e=>u.Ay.createElement(r.w,null,e);function Fn(){const e=(0,gn.VH)({shopPay:hn,default:Wn}),t=(0,fn.w9)("Checkout::Actions::RenderBefore");return u.Ay.createElement(zn.y,{impressionType:"pay_now_button",impressionFeatures:[]},u.Ay.createElement(a.a,null,u.Ay.createElement(_n.N,{extensions:t,render:Jn}),u.Ay.createElement(s.S,{id:"pay-button-container"},u.Ay.createElement(Ln,null,u.Ay.createElement(e,null)))))}function $n(){const e=(0,d.W)(),{walletPaymentMethods:t}=(0,Cn.b)(),n=(0,wn.Fu)(),r=(0,bn._B)(),a=(0===t.length&&n?e("payment.no_working_method_error","Dieser Shop kann zurzeit keine Zahlungen akzeptieren. Aktualisiere diese Seite oder versuche es später erneut."):null)||r;return a?u.Ay.createElement(i.l,{status:"critical"},a):null}function Wn(){const e=(0,o.M)(),{progressing:t,blocked:n}=(0,g.T4)(),{nextStep:r}=(0,_t.PL)(),s=(0,bn.YU)(),i=function(){const[e]=(0,bn.dx)(),[t]=(0,bn.VS)(),n=(0,bn.YU)(),r=(0,bn.H5)();return"error"!==e.status&&"error"!==t.status&&(n||r)}(),[f]=(0,bn.dx)(),[_]=(0,bn.c5)(),[v]=(0,bn.VS)(),E=(0,d.W)(),k=(0,ft.P)("simulated"),{loading:P}=(0,Bn.c$)(),C=(0,p.md)(P),w=(0,p.md)(h.g),[{loading:S}]=(0,Nn.T)(),I=(0,m.m)().searchParams.has(xn.JV),{displayedPaymentMethods:D}=(0,b.Ti)(),R=null!=D&&0!==D.length,z=(0,A.Bf)(),x=t||S||I,T=!R&&z||n||k&&"review"!==r.id||s&&("error"===f.status||"error"===_.status||"error"===v.status)||w,L=(0,Sn.bo)()?E("general.pay_now_button_label","Jetzt bezahlen"):r.label,M=(0,Re.v)(),B=M?.payActionType===y.Native,N=(0,In.MG)(),J=(0,Mn.uL)();let F;const $=C.size>0;switch(!0){case i:F=u.Ay.createElement(Pn,null);break;case N:F=u.Ay.createElement(Dn,{formId:e?.id,loading:x,disabled:T,label:L,ref:J("pay_button")});break;case B:F=u.Ay.createElement(Ie,{loading:x||$,disabled:T,isSubmit:!0});break;default:F=u.Ay.createElement(l.$,{accessibilityRole:"submit",inlineSize:"fill",loading:x,disabled:T,ref:J("pay_button")},u.Ay.createElement(c.E,{size:"large"},L))}return u.Ay.createElement(a.a,{spacing:"large200"},T&&u.Ay.createElement($n,null),F)}},15947:(e,t,n)=>{n.d(t,{r:()=>l});var r=n(94973),a=n(17402),s=n(71949),i=n(28073),o=n(16787);function l({id:e,children:t}){const n=(0,r.DD)(!1);return a.Ay.createElement(i.Mi.Provider,{value:(0,a.Kr)((()=>({id:e,completeStatusAtom:n})),[e,n])},t,a.Ay.createElement(c,null))}function c(){const e=(0,s.i)(i.Mi),t=(0,r.md)(e.completeStatusAtom);return(0,o.Lg)(e.id,!t),null}},53637:(e,t,n)=>{n.d(t,{H:()=>s});var r=n(71949),a=n(17148);function s(){return(0,r.i)(a.R)}},6541:(e,t,n)=>{n.d(t,{q:()=>r});const r="remote-ui::ready"},89941:(e,t,n)=>{n.d(t,{L:()=>a});var r=n(6541);function a({targetOrigin:e="*"}={}){if("undefined"==typeof self||null==self.parent)throw new Error("This does not appear to be a child iframe, because there is no parent window.");const{parent:t}=self,n=()=>t.postMessage(r.q,e);window.addEventListener("message",(e=>{e.source===t&&"complete"===document.readyState&&e.data===r.q&&n()})),"complete"===document.readyState?n():document.addEventListener("readystatechange",(()=>{"complete"===document.readyState&&n()}));const a=new WeakMap;return{postMessage(n,r){t.postMessage(n,e,r)},addEventListener(e,n){const r=e=>{e.source===t&&n(e)};a.set(n,r),self.addEventListener(e,r)},removeEventListener(e,t){const n=a.get(t);null!=n&&(a.delete(t),self.removeEventListener(e,n))}}}},26803:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(6541);function a(e,{terminate:t=!0,targetOrigin:n="*"}={}){var a;if("undefined"==typeof window)throw new Error("You can only run fromIframe() in a browser context, but no window was found.");const s=new WeakMap;let i;function o(t){t.source===e.contentWindow&&t.data===r.q&&(window.removeEventListener("message",o),i())}null===(a=e.contentWindow)||void 0===a||a.postMessage(r.q,n);const l=new Promise((e=>{i=e,window.addEventListener("message",o)}));return{async postMessage(t,r){var a;await l,null===(a=e.contentWindow)||void 0===a||a.postMessage(t,n,r)},addEventListener(t,n){const r=t=>{t.source===e.contentWindow&&n(t)};s.set(n,r),self.addEventListener(t,r)},removeEventListener(e,t){const n=s.get(t);null!=n&&(s.delete(t),self.removeEventListener(e,n))},terminate(){window.removeEventListener("message",o),t&&e.remove()}}}}}]);